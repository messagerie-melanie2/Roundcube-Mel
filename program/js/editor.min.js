(function(_0x288a97,_0x399496){var _0x18ca55=_0x22d7,_0x3a6e40=_0x288a97();while(!![]){try{var _0x5163c8=-parseInt(_0x18ca55(0xef))/0x1*(-parseInt(_0x18ca55(0x72))/0x2)+-parseInt(_0x18ca55(0xfd))/0x3+-parseInt(_0x18ca55(0x92))/0x4*(-parseInt(_0x18ca55(0xa2))/0x5)+-parseInt(_0x18ca55(0x108))/0x6*(parseInt(_0x18ca55(0x14d))/0x7)+-parseInt(_0x18ca55(0xa4))/0x8+parseInt(_0x18ca55(0xa3))/0x9+parseInt(_0x18ca55(0xf9))/0xa;if(_0x5163c8===_0x399496)break;else _0x3a6e40['push'](_0x3a6e40['shift']());}catch(_0x2d6207){_0x3a6e40['push'](_0x3a6e40['shift']());}}}(_0x35dd,0xc85d6));function rcube_text_editor(_0x4b8c09,_0x3fb075){var _0x354b9f=_0x22d7,_0x31a1fc=this,_0x392157=location[_0x354b9f(0x156)]['replace'](/[?#].*$/,'')[_0x354b9f(0x15d)](/\/$/,''),_0x4977e3={'selector':'#'+($('#'+_0x3fb075)['is']('.mce_editor')?_0x3fb075:_0x354b9f(0x82)),'cache_suffix':'s=5080200','theme':'silver','language':_0x4b8c09[_0x354b9f(0x13e)],'content_css':rcmail['assets_path'](_0x4b8c09[_0x354b9f(0x96)]),'content_style':_0x4b8c09['content_style'],'menubar':![],'statusbar':![],'toolbar_drawer':_0x354b9f(0x14a),'toolbar':'bold\x20italic\x20underline\x20|\x20alignleft\x20aligncenter\x20alignright\x20alignjustify'+'\x20|\x20fontselect\x20fontsizeselect\x20|\x20forecolor\x20backcolor','extended_valid_elements':_0x354b9f(0x10a),'fontsize_formats':_0x354b9f(0xbb),'valid_children':_0x354b9f(0x79),'relative_urls':![],'remove_script_host':![],'convert_urls':![],'image_description':![],'paste_webkit_style':_0x354b9f(0xc2),'automatic_uploads':![],'paste_data_images':!![],'browser_spellcheck':!![],'contextmenu':_0x354b9f(0xd1),'anchor_bottom':![],'anchor_top':![],'file_picker_types':'image\x20media','file_picker_callback':function(_0x30f040,_0xc0ea43,_0x54c98a){_0x31a1fc['file_picker_callback'](_0x30f040,_0xc0ea43,_0x54c98a);}};this[_0x354b9f(0x113)]=function(){};_0x4b8c09[_0x354b9f(0xd1)]&&(this[_0x354b9f(0xd1)]=_0x4b8c09['spellchecker'],_0x4b8c09[_0x354b9f(0x113)]&&(this[_0x354b9f(0xd1)][_0x354b9f(0x9e)]=this[_0x354b9f(0x113)]=_0x4b8c09[_0x354b9f(0x113)]));!tinymce[_0x354b9f(0xa9)]&&(tinymce[_0x354b9f(0xa9)]=!![],tinymce[_0x354b9f(0x14c)][_0x354b9f(0x14e)]['on'](_0x354b9f(0xa6),function(_0x4995c8){var _0x1765f0=_0x354b9f;_0x4995c8[_0x1765f0(0x97)][_0x1765f0(0xdf)]('X-Roundcube-Request',rcmail[_0x1765f0(0x7d)][_0x1765f0(0xb3)]);if(_0x4995c8[_0x1765f0(0xd7)]&&_0x4995c8[_0x1765f0(0xd7)][_0x1765f0(0x159)])_0x4995c8[_0x1765f0(0xd7)][_0x1765f0(0x159)]=_0x4995c8['settings'][_0x1765f0(0x159)][_0x1765f0(0x15d)](/^(method=[a-zA-Z]+&lang=)([^&]+)/,'$1'+rcmail['env'][_0x1765f0(0x110)]);}));_0x4b8c09[_0x354b9f(0xe1)]=='identity'?(_0x4977e3[_0x354b9f(0x133)]+=_0x354b9f(0xb5),$[_0x354b9f(0xc1)](_0x4977e3,{'plugins':_0x354b9f(0x12c),'file_picker_types':'image'})):(_0x4977e3[_0x354b9f(0x133)]+=_0x354b9f(0xcb)+_0x354b9f(0x70),$[_0x354b9f(0xc1)](_0x4977e3,{'plugins':'autolink\x20charmap\x20code\x20directionality\x20link\x20lists\x20image\x20media\x20nonbreaking'+'\x20paste\x20table\x20tabfocus\x20searchreplace\x20spellchecker','spellchecker_rpc_url':_0x392157+_0x354b9f(0x8f),'spellchecker_language':rcmail[_0x354b9f(0x7d)][_0x354b9f(0x110)],'min_height':0x190}));$[_0x354b9f(0xdd)](_0x4b8c09['extra_plugins']||[],function(){var _0x5b0bd0=_0x354b9f;if(_0x4977e3[_0x5b0bd0(0x120)][_0x5b0bd0(0x106)](this)<0x0)_0x4977e3['plugins']=_0x4977e3[_0x5b0bd0(0x120)]+'\x20'+this;}),$[_0x354b9f(0xdd)](_0x4b8c09[_0x354b9f(0x91)]||[],function(){var _0x3cef73=_0x354b9f;if(_0x4977e3[_0x3cef73(0x133)]['indexOf'](this)<0x0)_0x4977e3[_0x3cef73(0x133)]=_0x4977e3[_0x3cef73(0x133)][_0x3cef73(0x15d)]('$extra',_0x3cef73(0xe2)+this);}),$['each'](_0x4b8c09['disabled_plugins']||[],function(){var _0x1bd9ee=_0x354b9f;_0x4977e3['plugins']=_0x4977e3[_0x1bd9ee(0x120)]['replace'](this,'');}),$[_0x354b9f(0xdd)](_0x4b8c09[_0x354b9f(0x136)]||[],function(){var _0x2818bd=_0x354b9f;_0x4977e3[_0x2818bd(0x133)]=_0x4977e3[_0x2818bd(0x133)][_0x2818bd(0x15d)](this,'');}),_0x4977e3[_0x354b9f(0x133)]=_0x4977e3['toolbar'][_0x354b9f(0x15d)](_0x354b9f(0x12f),'')['replace'](/\|\s+\|/g,'|');if(window[_0x354b9f(0x6c)])$[_0x354b9f(0xc1)](_0x4977e3,window['rcmail_editor_settings']);_0x4977e3[_0x354b9f(0x122)]=function(_0x47d15f){var _0x1491aa=_0x354b9f;_0x47d15f['on']('init',function(){_0x31a1fc['init_callback'](_0x47d15f);}),_0x47d15f['on'](_0x1491aa(0x138),function(_0x374608){var _0x27caca=_0x1491aa;_0x31a1fc[_0x27caca(0x76)]=_0x374608['type']==_0x27caca(0x109),_0x31a1fc[_0x27caca(0x113)]();}),_0x47d15f['on']('keypress',function(){var _0xda0816=_0x1491aa;rcmail[_0xda0816(0x14f)]++;}),_0x47d15f['on'](_0x1491aa(0x166),function(_0x25ebbb){var _0x4f9d13=_0x1491aa,_0x35f902=$(_0x25ebbb[_0x4f9d13(0x114)])[_0x4f9d13(0x89)]('a');if(_0x35f902[_0x4f9d13(0xd4)]&&_0x25ebbb['shiftKey'])return window['open'](_0x35f902[_0x4f9d13(0xf8)](0x0)[_0x4f9d13(0x156)],_0x4f9d13(0xa8)),![];}),_0x47d15f['on'](_0x1491aa(0xb7),function(_0x1a5bfa){var _0x273fa8=_0x1491aa;$(_0x47d15f[_0x273fa8(0x80)]())['toggleClass'](_0x273fa8(0x152));});if(_0x4977e3['setup_callback'])_0x4977e3[_0x1491aa(0x145)](_0x47d15f);},rcmail['triggerEvent'](_0x354b9f(0x8b),{'config':_0x4977e3,'ref':_0x31a1fc,'id':_0x3fb075}),this['id']=_0x3fb075,this['editor']=null,this[_0x354b9f(0x155)]=_0x4977e3,this['_initial_conf']={..._0x4977e3},tinymce[_0x354b9f(0xe0)](_0x4977e3),this['init_callback']=function(_0x2d88a6){var _0x114c34=_0x354b9f;this[_0x114c34(0x9a)]=_0x2d88a6;if(rcmail[_0x114c34(0x7d)][_0x114c34(0xd6)]==_0x114c34(0xd8)){var _0x62b9b6=$('#'+this['id']),_0x3e1616=$(_0x114c34(0xb0),_0x62b9b6[_0x114c34(0x165)]())[_0x114c34(0xcd)]()[_0x114c34(0xf3)]();if(_0x3e1616>0xc8||_0x3e1616>_0x62b9b6[_0x114c34(0xf3)]())return setTimeout(function(){var _0x44c713=_0x114c34;_0x31a1fc[_0x44c713(0x105)](_0x2d88a6);},0x12c);var _0x4f61e6=rcube_find_object(_0x114c34(0x135)),_0x4c756b=rcmail[_0x114c34(0x7d)][_0x114c34(0xfa)];if(_0x4f61e6&&_0x4f61e6[_0x114c34(0x7b)]=='select-one'){if(!rcmail[_0x114c34(0x7d)][_0x114c34(0xb1)])rcmail[_0x114c34(0x71)](_0x4f61e6);_0x4c756b&&_0x4c756b['id']!=this['id']&&_0x4c756b[_0x114c34(0x167)]!=_0x114c34(0xee)&&(window['focus'](),_0x4c756b['focus'](),rcmail[_0x114c34(0x7d)]['compose_focus_elem']=null);}}rcmail[_0x114c34(0xe3)](_0x114c34(0x104),{'config':_0x4977e3,'ref':_0x31a1fc}),_0x31a1fc[_0x114c34(0x74)](_0x31a1fc[_0x114c34(0x127)]||_0x4c756b&&_0x4c756b['id']==_0x31a1fc['id']),$(window)[_0x114c34(0xc5)]();},this[_0x354b9f(0x10b)]=function(_0x2fe357){var _0x118ee6=_0x354b9f;return this[_0x118ee6(0x9a)][_0x118ee6(0x142)](),this[_0x118ee6(0x155)]=_0x2fe357,tinymce[_0x118ee6(0xe0)](this[_0x118ee6(0x155)]),this;},this['update_to_dark']=function(){var _0x1a2d9a=_0x354b9f;let _0x9d3a77=this[_0x1a2d9a(0x155)];return _0x9d3a77[_0x1a2d9a(0x96)]=_0x1a2d9a(0xc4),this[_0x1a2d9a(0x10b)](_0x9d3a77);},this[_0x354b9f(0x157)]=function(){var _0x4f76f3=_0x354b9f;return this[_0x4f76f3(0x10b)]({...this[_0x4f76f3(0x88)]});},this[_0x354b9f(0x74)]=function(_0x141999){var _0x416c58=_0x354b9f;if(rcmail[_0x416c58(0x7d)][_0x416c58(0x77)]=='mail'&&this[_0x416c58(0x9a)]){var _0x33ff55=this['editor']['getElement'](),_0x26ace8=this[_0x416c58(0x9a)][_0x416c58(0x117)]()[_0x416c58(0x111)][0x0];if(_0x33ff55&&_0x26ace8)_0x26ace8[_0x416c58(0xba)]=_0x33ff55['tabIndex'];if(_0x33ff55[_0x416c58(0xba)]>0x0){var _0x3995af=null,_0x2118e8=[':prev',_0x416c58(0xde)],_0x58b454=tinymce[_0x416c58(0xb8)]['select'](_0x416c58(0xa5)+_0x33ff55[_0x416c58(0xba)]+_0x416c58(0x9d));tinymce[_0x416c58(0xdd)](_0x58b454,function(_0x572aed,_0x56dd66){if(_0x572aed['id']==_0x31a1fc['id'])return _0x3995af=_0x56dd66,![];}),_0x3995af!==null&&(_0x58b454[_0x3995af-0x1]&&_0x58b454[_0x3995af-0x1]['id']&&(_0x2118e8[0x0]=_0x58b454[_0x3995af-0x1]['id']),_0x58b454[_0x3995af+0x1]&&_0x58b454[_0x3995af+0x1]['id']&&(_0x2118e8[0x1]=_0x58b454[_0x3995af+0x1]['id']),this[_0x416c58(0x9a)][_0x416c58(0xd7)][_0x416c58(0x132)]=_0x2118e8[_0x416c58(0x128)](','));}if(bw['mz']&&bw[_0x416c58(0x90)]<0x19)$(this[_0x416c58(0x9a)][_0x416c58(0xc7)]())[_0x416c58(0xac)](_0x416c58(0x7f),![])[_0x416c58(0xac)](_0x416c58(0x7f),!![]);}if(_0x141999)this[_0x416c58(0x115)]();},this['focus']=function(){var _0x37d97b=_0x354b9f;$(this[_0x37d97b(0x9a)]||'#'+this['id'])[_0x37d97b(0x115)](),this[_0x37d97b(0x127)]=![];},this[_0x354b9f(0x8d)]=function(_0x13911f,_0xcf6944){var _0x3350db=_0x354b9f,_0x43bea3,_0x5903af,_0x414c29,_0x28bcf3='\x02\x03',_0x96e0ee=$('#'+this['id']),_0x5675a1=rcmail[_0x3350db(0x7d)]['identity']?rcmail[_0x3350db(0x7d)][_0x3350db(0x6e)][rcmail[_0x3350db(0x7d)][_0x3350db(0x11a)]]:null,_0x3fc37a=_0x5675a1&&_0x5675a1[_0x3350db(0xbf)]&&_0x5675a1[_0x3350db(0xbf)][_0x3350db(0xd4)]>0x1;this[_0x3350db(0xb2)]();if(_0x13911f){_0x5903af=_0x96e0ee['val']();_0x3fc37a&&(_0x5903af=_0x5903af[_0x3350db(0x15d)](/\r\n/,'\x0a'),_0x5903af=_0x5903af[_0x3350db(0x15d)](_0x5675a1[_0x3350db(0xbf)]['replace'](/\r\n/,'\x0a'),_0x28bcf3));var _0x354dc9=function(_0x56f44e){var _0x322bf4=_0x3350db;if(_0x3fc37a)_0x56f44e=_0x56f44e['replace'](_0x28bcf3,_0x322bf4(0x125)+_0x5675a1['html']+_0x322bf4(0x137));_0x31a1fc[_0x322bf4(0x127)]=!![],_0x96e0ee[_0x322bf4(0xa0)](_0x56f44e),tinymce['execCommand'](_0x322bf4(0x124),![],_0x31a1fc['id']);};!_0xcf6944?_0x414c29=rcmail[_0x3350db(0xcf)](_0x5903af,_0x354dc9):(_0x354dc9(_0x5903af),_0x414c29=!![]);}else{if(this[_0x3350db(0x9a)]){if(_0x3fc37a){if(_0x43bea3=this['editor'][_0x3350db(0x13d)]['get']('_rc_sig'))_0x43bea3=_0x43bea3[_0x3350db(0x13f)];this[_0x3350db(0x9a)][_0x3350db(0x13d)]['setHTML'](_0x3350db(0xda),_0x28bcf3);}_0x5903af=this['editor'][_0x3350db(0x139)]();var _0x13cc9f=function(_0x4fa375){var _0x31d59a=_0x3350db;tinymce['execCommand'](_0x31d59a(0x8a),![],_0x31a1fc['id']),_0x31a1fc[_0x31d59a(0x9a)]=null;if(_0x3fc37a)_0x4fa375=_0x4fa375[_0x31d59a(0x15d)](_0x28bcf3,'\x0a'+_0x5675a1[_0x31d59a(0xbf)]);_0x96e0ee[_0x31d59a(0xa0)](_0x4fa375)[_0x31d59a(0x115)]()['trigger'](_0x31d59a(0xad)),rcmail['set_caret_pos'](_0x96e0ee[_0x31d59a(0xf8)](0x0),0x0);};!_0xcf6944?_0x414c29=rcmail[_0x3350db(0x11f)](_0x5903af,_0x13cc9f):(_0x13cc9f(_0x96e0ee[_0x3350db(0xa0)]()),_0x414c29=!![]);if(!_0x414c29&&_0x43bea3)this[_0x3350db(0x9a)]['dom'][_0x3350db(0x164)](_0x3350db(0xda),_0x43bea3);}}return _0x414c29;},this['spellcheck_start']=function(){var _0x348177=_0x354b9f;if(this['editor'])tinymce[_0x348177(0x15f)](_0x348177(0x102),!![]),this[_0x348177(0x113)]();else this[_0x348177(0xd1)]&&this[_0x348177(0xd1)][_0x348177(0x87)]&&this[_0x348177(0xd1)][_0x348177(0x87)]();},this[_0x354b9f(0xb2)]=function(){var _0x474ff6=_0x354b9f,_0x39d18d=this[_0x474ff6(0x9a)];if(_0x39d18d)_0x39d18d[_0x474ff6(0x120)]&&_0x39d18d[_0x474ff6(0x120)][_0x474ff6(0xd1)]&&this[_0x474ff6(0x76)]&&(_0x39d18d['execCommand'](_0x474ff6(0x102),![]),this[_0x474ff6(0x113)]());else{if(_0x39d18d=this[_0x474ff6(0xd1)]){if(_0x39d18d[_0x474ff6(0x7c)]&&_0x39d18d['state']!=_0x474ff6(0x84)&&_0x39d18d[_0x474ff6(0x7c)]!='no_error_found')$(_0x39d18d['spell_span'])['trigger'](_0x474ff6(0x166));}}},this['spellcheck_state']=function(){var _0xbdcebf=_0x354b9f,_0x52e69f;if(this['editor'])return this[_0xbdcebf(0x76)];else{if((_0x52e69f=this[_0xbdcebf(0xd1)])&&_0x52e69f[_0xbdcebf(0x7c)])return _0x52e69f[_0xbdcebf(0x7c)]!=_0xbdcebf(0x84)&&_0x52e69f[_0xbdcebf(0x7c)]!=_0xbdcebf(0x10e);}},this[_0x354b9f(0xea)]=function(_0x1ef9e5){var _0x102211=_0x354b9f,_0x423681=this[_0x102211(0x9a)];if(_0x423681)_0x423681[_0x102211(0x120)]['spellchecker'][_0x102211(0x9c)](_0x1ef9e5);else(_0x423681=this[_0x102211(0xd1)])&&(_0x423681[_0x102211(0xf0)](![],!![]),_0x423681['processData'](_0x1ef9e5));},this[_0x354b9f(0x10f)]=function(){var _0x3b9d4c=_0x354b9f;return rcmail[_0x3b9d4c(0x7d)][_0x3b9d4c(0x110)];},this['set_language']=function(_0x1bfaeb){var _0xaf42a=_0x354b9f,_0x165289=this['editor'];_0x165289&&(_0x165289['settings']['spellchecker_language']=_0x1bfaeb),(_0x165289=this[_0xaf42a(0xd1)])&&_0x165289[_0xaf42a(0xed)](_0x1bfaeb),rcmail['env'][_0xaf42a(0x110)]=_0x1bfaeb;},this['replace']=function(_0x330dd9){var _0x2ad8ea=_0x354b9f,_0x27132a,_0x1403ed=this[_0x2ad8ea(0x9a)];if(!_0x330dd9)return![];if(_0x1403ed){_0x1403ed[_0x2ad8ea(0x93)]()[_0x2ad8ea(0x115)]();if($[_0x2ad8ea(0x7b)](_0x330dd9)==_0x2ad8ea(0x119)&&_0x2ad8ea(0xc6)in _0x330dd9)_0x330dd9=_0x330dd9['html'],_0x27132a='html';else{if($['type'](_0x330dd9)==_0x2ad8ea(0x119))_0x330dd9=_0x330dd9[_0x2ad8ea(0xbf)]||'';_0x330dd9=rcmail[_0x2ad8ea(0xe8)](_0x330dd9)['replace'](/\r?\n/g,'<br/>'),_0x27132a=_0x2ad8ea(0xbf);}_0x1403ed[_0x2ad8ea(0x13a)]['setContent'](_0x330dd9,{'format':_0x27132a});}else{if(_0x1403ed=rcube_find_object(this['id'])){var _0x282510=rcmail['get_input_selection'](_0x1403ed),_0x41e50f=_0x1403ed[_0x2ad8ea(0x11d)],_0x4a6dcf=_0x41e50f[_0x2ad8ea(0xec)](0x0,_0x282510['start']),_0x389ea6=_0x41e50f[_0x2ad8ea(0xec)](_0x282510['end'],_0x41e50f['length']);if($[_0x2ad8ea(0x7b)](_0x330dd9)==_0x2ad8ea(0x119))_0x330dd9=_0x330dd9['text']||'';_0x1403ed[_0x2ad8ea(0x11d)]=_0x4a6dcf+_0x330dd9+_0x389ea6,rcmail[_0x2ad8ea(0x126)](_0x1403ed,_0x282510[_0x2ad8ea(0x123)]+_0x330dd9[_0x2ad8ea(0xd4)]),_0x1403ed[_0x2ad8ea(0x115)]();}}},this[_0x354b9f(0xb6)]=function(_0x23b9b7){var _0x2f8bd3=_0x354b9f;if(this[_0x2f8bd3(0x9a)])this[_0x2f8bd3(0x9a)][_0x2f8bd3(0xc0)](_0x23b9b7),this[_0x2f8bd3(0x9a)][_0x2f8bd3(0x93)]()[_0x2f8bd3(0x115)]();else(ed=rcube_find_object(this['id']))&&$(ed)['val'](_0x23b9b7)[_0x2f8bd3(0x115)]();},this[_0x354b9f(0x144)]=function(_0x38bff6){var _0xbffc02=_0x354b9f,_0x4ff91f,_0x48ec8f=this[_0xbffc02(0x9a)],_0x19b16e='',_0x3fbcae=![],_0xc9504e={'refresh':!![],'selection':![],'nosig':![],'format':'html'};if(!_0x38bff6)_0x38bff6=_0xc9504e;else _0x38bff6=$[_0xbffc02(0xc1)](_0xc9504e,_0x38bff6);_0x38bff6[_0xbffc02(0x12e)]&&this['spellcheck_stop']();if(_0x48ec8f){if(_0x38bff6[_0xbffc02(0x13a)])_0x19b16e=_0x48ec8f[_0xbffc02(0x13a)][_0xbffc02(0x139)]({'format':_0x38bff6[_0xbffc02(0x100)]});!_0x19b16e&&(_0x19b16e=_0x48ec8f[_0xbffc02(0x139)]({'format':_0x38bff6['format']}),_0x3fbcae=_0x38bff6[_0xbffc02(0x100)]=='text');}else(_0x48ec8f=rcube_find_object(this['id']))&&(_0x38bff6[_0xbffc02(0x13a)]&&(_0x19b16e=rcmail[_0xbffc02(0x75)](_0x48ec8f)['text']),!_0x19b16e&&(_0x19b16e=_0x48ec8f['value'],_0x3fbcae=!![]));return _0x3fbcae&&_0x38bff6[_0xbffc02(0x168)]&&(_0x4ff91f=_0x19b16e[_0xbffc02(0x106)](_0xbffc02(0x6b)),_0x4ff91f>0x0&&(_0x19b16e=_0x19b16e[_0xbffc02(0xec)](0x0,_0x4ff91f))),_0x19b16e;},this['change_signature']=function(_0x5d7344,_0x3901bb){var _0x1774a0=_0x354b9f,_0x42c378,_0x3830a1,_0x229207=-0x1,_0x1d5fe0=$('#'+this['id']),_0x343841=_0x1d5fe0['val'](),_0x55ad4e=rcmail['env'][_0x1774a0(0x11a)];if(!this[_0x1774a0(0x9a)]){if(_0x3901bb&&_0x55ad4e&&rcmail[_0x1774a0(0x7d)][_0x1774a0(0x6e)]&&rcmail[_0x1774a0(0x7d)]['signatures'][_0x55ad4e]){_0x55ad4e=rcmail[_0x1774a0(0x7d)][_0x1774a0(0x6e)][_0x55ad4e]['text'],_0x55ad4e=_0x55ad4e[_0x1774a0(0x15d)](/\r\n/g,'\x0a'),_0x229207=rcmail[_0x1774a0(0x7d)]['top_posting']?_0x343841['indexOf'](_0x55ad4e):_0x343841[_0x1774a0(0x163)](_0x55ad4e);if(_0x229207>=0x0)_0x343841=_0x343841[_0x1774a0(0xec)](0x0,_0x229207)+_0x343841[_0x1774a0(0xec)](_0x229207+_0x55ad4e[_0x1774a0(0xd4)],_0x343841['length']);}if(_0x3901bb&&rcmail[_0x1774a0(0x7d)][_0x1774a0(0x6e)]&&rcmail[_0x1774a0(0x7d)]['signatures'][_0x5d7344]){_0x55ad4e=rcmail[_0x1774a0(0x7d)][_0x1774a0(0x6e)][_0x5d7344][_0x1774a0(0xbf)],_0x55ad4e=_0x55ad4e[_0x1774a0(0x15d)](/\r\n/g,'\x0a');if(_0x229207>=0x0)_0x343841=_0x343841['substring'](0x0,_0x229207)+_0x55ad4e+_0x343841['substring'](_0x229207,_0x343841[_0x1774a0(0xd4)]),_0x3830a1=_0x229207-0x1;else{if(!_0x343841||!rcmail[_0x1774a0(0x7d)][_0x1774a0(0x7a)])_0x3830a1=_0x343841[_0x1774a0(0xd4)],_0x343841+='\x0a\x0a'+_0x55ad4e;else rcmail[_0x1774a0(0x7d)]['top_posting']&&!rcmail[_0x1774a0(0x7d)]['sig_below']?(pos=rcmail['get_caret_pos'](_0x1d5fe0[_0x1774a0(0xf8)](0x0)))?(_0x343841=_0x343841[_0x1774a0(0xec)](0x0,pos)+'\x0a'+_0x55ad4e+'\x0a\x0a'+_0x343841[_0x1774a0(0xec)](pos,_0x343841['length']),_0x3830a1=pos):(_0x343841='\x0a\x0a'+_0x55ad4e+'\x0a\x0a'+_0x343841['replace'](/^[\r\n]+/,''),_0x3830a1=0x0):(_0x343841=_0x343841['replace'](/[\r\n]+$/,''),_0x3830a1=!rcmail['env']['top_posting']&&_0x343841[_0x1774a0(0xd4)]?_0x343841['length']+0x1:0x0,_0x343841+='\x0a\x0a'+_0x55ad4e);}}else _0x3830a1=rcmail[_0x1774a0(0x7d)][_0x1774a0(0x162)]?0x0:_0x343841[_0x1774a0(0xd4)];_0x1d5fe0[_0x1774a0(0xa0)](_0x343841),rcmail['set_caret_pos'](_0x1d5fe0[_0x1774a0(0xf8)](0x0),_0x3830a1);}else{if(_0x3901bb&&rcmail[_0x1774a0(0x7d)][_0x1774a0(0x6e)]){var _0x246206=this[_0x1774a0(0x9a)]['dom'][_0x1774a0(0xf8)]('_rc_sig');if(!_0x246206){var _0x49bbeb=this[_0x1774a0(0x9a)][_0x1774a0(0xc7)]();_0x246206=$(_0x1774a0(0x160))[_0x1774a0(0xf8)](0x0);if(rcmail['env'][_0x1774a0(0x162)]&&!rcmail[_0x1774a0(0x7d)]['sig_below']&&rcmail['env'][_0x1774a0(0x7a)]&&(_0x49bbeb[_0x1774a0(0x111)][_0x1774a0(0xd4)]>0x1||$(_0x49bbeb)[_0x1774a0(0xbf)]())){this['editor'][_0x1774a0(0x93)]()[_0x1774a0(0x115)]();var _0x10f205=this[_0x1774a0(0x9a)]['selection'][_0x1774a0(0xd9)]();$(_0x246206)[_0x1774a0(0x169)](_0x10f205['nodeName']=='BODY'?_0x49bbeb[_0x1774a0(0x11e)]:_0x10f205[_0x1774a0(0xbd)]),$(_0x1774a0(0xfe))[_0x1774a0(0xf2)]($(_0x1774a0(0xc3)))[_0x1774a0(0x169)](_0x246206);}else _0x49bbeb[_0x1774a0(0xfc)](_0x246206),_0x42c378=rcmail[_0x1774a0(0x7d)][_0x1774a0(0x162)]&&rcmail[_0x1774a0(0x7d)][_0x1774a0(0x7a)]?_0x49bbeb[_0x1774a0(0x11e)]:$(_0x246206)[_0x1774a0(0x7e)]();}_0x246206[_0x1774a0(0x13f)]=rcmail[_0x1774a0(0x7d)][_0x1774a0(0x6e)][_0x5d7344]?rcmail[_0x1774a0(0x7d)][_0x1774a0(0x6e)][_0x5d7344][_0x1774a0(0xc6)]:'';}else!rcmail[_0x1774a0(0x7d)][_0x1774a0(0x162)]&&(_0x42c378=$(this[_0x1774a0(0x9a)][_0x1774a0(0xc7)]())[_0x1774a0(0xbc)]()[_0x1774a0(0x99)]());}this['editor']&&_0x42c378&&_0x42c378[_0x1774a0(0xd4)]&&(this[_0x1774a0(0x9a)][_0x1774a0(0x13a)][_0x1774a0(0xcc)](_0x42c378['get'](0x0)),this[_0x1774a0(0x9a)]['getWin']()[_0x1774a0(0x83)](0x0,_0x42c378[_0x1774a0(0xfb)]()['top']));},this[_0x354b9f(0x112)]=function(){var _0x2debc5=_0x354b9f;this[_0x2debc5(0x9a)]&&this['editor'][_0x2debc5(0x112)]();},this[_0x354b9f(0x115)]=function(){var _0x263eb0=_0x354b9f;(this[_0x263eb0(0x9a)]||rcube_find_object(this['id']))[_0x263eb0(0x115)]();},this['file_picker_callback']=function(_0x27bb57,_0x14a412,_0x471c36){var _0x3fed6d=_0x354b9f,_0x136209,_0x1a76ff,_0x350233,_0x28fca5,_0x11a478,_0x2c46ea,_0x56b183,_0x6b3dc7=[],_0x5c8930=_0x471c36['filetype'],_0x153b3a=$(_0x3fed6d(0x15e))[_0x3fed6d(0x15a)]();this['editor'][_0x3fed6d(0x6f)][_0x3fed6d(0x78)]({'title':rcmail[_0x3fed6d(0xf7)](_0x3fed6d(0x146)+_0x5c8930),'body':{'type':_0x3fed6d(0x149),'items':[{'type':'htmlpanel','html':_0x3fed6d(0x9b)}]},'buttons':[{'type':'cancel','text':rcmail[_0x3fed6d(0xf7)]('close'),'onclick':function(){var _0x5a1c63=_0x3fed6d;_0x31a1fc[_0x5a1c63(0x143)]();}}]}),rcmail[_0x3fed6d(0x7d)][_0x3fed6d(0x12d)]=_0x27bb57,rcmail[_0x3fed6d(0x7d)][_0x3fed6d(0xce)]=_0x5c8930,_0x11a478=$(_0x3fed6d(0x11c));if(!_0x153b3a['length'])_0x153b3a=this[_0x3fed6d(0x140)](rcmail[_0x3fed6d(0xdc)][_0x3fed6d(0x73)]);else _0x153b3a[_0x3fed6d(0xf5)](_0x3fed6d(0x10c))[_0x3fed6d(0xbe)](0x1)[_0x3fed6d(0x142)]();_0x1a76ff=_0x11a478[_0x3fed6d(0xe9)](_0x153b3a)['find'](_0x3fed6d(0x10c))[_0x3fed6d(0xbf)](rcmail['get_label'](_0x3fed6d(0x6d)+_0x5c8930))[_0x3fed6d(0x115)]();if(!_0x1a76ff['is'](_0x3fed6d(0x12a)))_0x1a76ff[_0x3fed6d(0x94)]('tox-button');for(_0x136209 in rcmail['env'][_0x3fed6d(0x154)]){(_0x350233=_0x31a1fc['file_picker_entry'](_0x136209,rcmail[_0x3fed6d(0x7d)][_0x3fed6d(0x154)][_0x136209]))&&_0x6b3dc7[_0x3fed6d(0x98)](_0x350233);}_0x28fca5=_0x11a478[_0x3fed6d(0x129)](_0x3fed6d(0xb4))[_0x3fed6d(0xf5)](_0x3fed6d(0x14b))[_0x3fed6d(0x99)](),_0x6b3dc7=$('#image-selector-list')[_0x3fed6d(0xf2)](_0x6b3dc7)['on'](_0x3fed6d(0x103),'li',function(_0xcd918a){var _0x580a15=_0x3fed6d;if(_0xcd918a[_0x580a15(0xdb)]==0x9){if(rcube_event[_0x580a15(0x148)](_0xcd918a)==SHIFT_KEY)!$(this)['prev']()[_0x580a15(0x115)]()[_0x580a15(0xd4)]&&_0x1a76ff[_0x580a15(0x115)]();else!$(this)[_0x580a15(0x81)]()[_0x580a15(0x115)]()[_0x580a15(0xd4)]&&_0x28fca5[_0x580a15(0x115)]();return![];}}),_0x1a76ff[_0x3fed6d(0x103)](function(_0x45f89f){var _0x54edaf=_0x3fed6d;if(_0x45f89f['which']==0x9)return(rcube_event['get_modifier'](_0x45f89f)==SHIFT_KEY||!_0x6b3dc7[_0x54edaf(0xf5)]('li')['first']()[_0x54edaf(0x115)]()[_0x54edaf(0xd4)])&&_0x28fca5[_0x54edaf(0x115)](),![];_0x45f89f[_0x54edaf(0xdb)]==0xd&&this['click']();}),_0x28fca5[_0x3fed6d(0x103)](function(_0x63cbf3){var _0x58aec2=_0x3fed6d;if(_0x63cbf3[_0x58aec2(0xdb)]==0x9)return(rcube_event[_0x58aec2(0x148)](_0x63cbf3)!=SHIFT_KEY||!_0x6b3dc7[_0x58aec2(0xf5)]('li')['last']()[_0x58aec2(0x115)]()[_0x58aec2(0xd4)])&&_0x1a76ff[_0x58aec2(0x115)](),![];}),window[_0x3fed6d(0x13b)]&&(!rcmail['env'][_0x3fed6d(0x151)]&&(rcmail[_0x3fed6d(0x7d)][_0x3fed6d(0x151)]={}),rcmail['gui_objects'][_0x3fed6d(0x151)]&&(rcmail[_0x3fed6d(0x7d)][_0x3fed6d(0x95)]=rcmail[_0x3fed6d(0xdc)][_0x3fed6d(0x151)]),rcmail[_0x3fed6d(0xdc)][_0x3fed6d(0x151)]=$('#image-selector'),rcmail['gui_objects']['filedrop'][_0x3fed6d(0x94)](_0x3fed6d(0x107))['on'](_0x3fed6d(0xd0),function(_0x3fecd3){var _0x6de653=_0x3fed6d;_0x3fecd3[_0x6de653(0x158)](),_0x3fecd3[_0x6de653(0x153)](),$(this)[_0x3fecd3[_0x6de653(0x7b)]=='dragover'?_0x6de653(0x94):_0x6de653(0x86)]('hover');})[_0x3fed6d(0xf8)](0x0)['addEventListener'](_0x3fed6d(0xd5),function(_0x2337a6){var _0x2c2360=_0x3fed6d;return rcmail[_0x2c2360(0xca)](_0x2337a6);},![])),!rcmail[_0x3fed6d(0x7d)][_0x3fed6d(0x161)+_0x5c8930]&&(rcmail[_0x3fed6d(0x7d)][_0x3fed6d(0x141)+_0x5c8930]=!![],rcmail['addEventListener'](_0x3fed6d(0x131),function(_0x2a459a){var _0x838df8=_0x3fed6d,_0x203b72;(_0x203b72=_0x31a1fc[_0x838df8(0xf6)](_0x2a459a['name'],_0x2a459a[_0x838df8(0xaa)]))&&(_0x6b3dc7[_0x838df8(0xe9)](_0x203b72),_0x203b72['focus']());}));},this[_0x354b9f(0x143)]=function(_0x545614){var _0x102fe1=_0x354b9f;this[_0x102fe1(0x9a)][_0x102fe1(0x6f)][_0x102fe1(0xd3)]();if(_0x545614)rcmail['env'][_0x102fe1(0x12d)](_0x545614);if(rcmail[_0x102fe1(0x7d)][_0x102fe1(0x95)])rcmail[_0x102fe1(0xdc)][_0x102fe1(0x151)]=rcmail[_0x102fe1(0x7d)][_0x102fe1(0x95)];},this[_0x354b9f(0xf6)]=function(_0x1c97e3,_0x12d04e){var _0x1a5c18=_0x354b9f;if(!_0x12d04e[_0x1a5c18(0xa1)]||!_0x12d04e[_0x1a5c18(0x10d)])return;rcmail['file_upload_id']&&rcmail[_0x1a5c18(0x8e)](![],null,rcmail['file_upload_id']);var _0x54854e,_0x3cc6c1;switch(rcmail[_0x1a5c18(0x7d)][_0x1a5c18(0xce)]){case _0x1a5c18(0xff):_0x54854e=/^image\//i;break;case'media':_0x54854e=/^video\//i,_0x3cc6c1=rcmail[_0x1a5c18(0x15b)](_0x1a5c18(0x13c));break;default:return;}if(_0x54854e[_0x1a5c18(0x85)](_0x12d04e[_0x1a5c18(0x10d)])){var _0x129c23=rcmail[_0x1a5c18(0x7d)][_0x1a5c18(0xc8)]+_0x1a5c18(0x134)+rcmail['env'][_0x1a5c18(0xd6)],_0x312820=rcmail[_0x1a5c18(0x7d)][_0x1a5c18(0xa7)]?'&_id='+rcmail[_0x1a5c18(0x7d)][_0x1a5c18(0xa7)]+_0x1a5c18(0x121):'&_action=upload-display',_0xab89eb=_0x129c23+_0x312820+_0x1a5c18(0xf1)+_0x1c97e3,_0x21506d=$(_0x1a5c18(0x11b))['attr']({'title':_0x12d04e[_0x1a5c18(0x147)],'src':_0x3cc6c1?_0x3cc6c1:_0xab89eb+_0x1a5c18(0x150)});return $(_0x1a5c18(0xf4))[_0x1a5c18(0x15c)]({'tabindex':0x0})[_0x1a5c18(0x159)](_0x1a5c18(0xe4),_0xab89eb)['append']($(_0x1a5c18(0xe6))['append'](_0x21506d))[_0x1a5c18(0xf2)]($(_0x1a5c18(0x116))[_0x1a5c18(0xbf)](_0x12d04e[_0x1a5c18(0x147)]))[_0x1a5c18(0x166)](function(){var _0x14f019=_0x1a5c18;_0x31a1fc[_0x14f019(0x143)]($(this)[_0x14f019(0x159)](_0x14f019(0xe4)));})[_0x1a5c18(0x103)](function(_0x598b54){var _0x97bfe9=_0x1a5c18;_0x598b54[_0x97bfe9(0xdb)]==0xd&&_0x31a1fc['file_picker_close']($(this)[_0x97bfe9(0x159)](_0x97bfe9(0xe4)));});}},this[_0x354b9f(0x140)]=function(_0x5d2c63){var _0x48fd77=_0x354b9f,_0x16070a=_0x5d2c63?$(_0x5d2c63)['find']('.hint')[_0x48fd77(0xbf)]():'',_0x2e9bac=$(_0x48fd77(0x9f))[_0x48fd77(0x15c)]({'method':_0x48fd77(0xc9),'enctype':_0x48fd77(0xe5)});file=$(_0x48fd77(0x8c))[_0x48fd77(0x15c)]({'name':_0x48fd77(0xeb),'type':_0x48fd77(0xab),'multiple':!![],'style':_0x48fd77(0xae)})['change'](function(){var _0x294037=_0x48fd77;rcmail[_0x294037(0xd2)](_0x2e9bac,'upload');}),wrapper=$(_0x48fd77(0xe7))[_0x48fd77(0xf2)]($(_0x48fd77(0xb9))['attr']({'class':_0x48fd77(0xaf),'href':'#','onclick':_0x48fd77(0x130)}));if(_0x16070a)wrapper[_0x48fd77(0xe9)]($(_0x48fd77(0x118))[_0x48fd77(0xbf)](_0x16070a));return _0x5d2c63&&(file[_0x48fd77(0x15c)](_0x48fd77(0x147),$('input[type=\x22file\x22]',_0x5d2c63)['attr']('name')),_0x2e9bac[_0x48fd77(0x15c)](_0x48fd77(0xd6),$(_0x5d2c63)['attr'](_0x48fd77(0xd6)))),_0x2e9bac[_0x48fd77(0xf2)](file)[_0x48fd77(0xf2)]($('<input>')['attr']({'type':_0x48fd77(0x101),'name':_0x48fd77(0x12b),'value':rcmail[_0x48fd77(0x7d)][_0x48fd77(0xb3)]})),wrapper[_0x48fd77(0xf2)](_0x2e9bac);};}function _0x22d7(_0x335b68,_0x5b97f5){var _0x35ddb5=_0x35dd();return _0x22d7=function(_0x22d747,_0x75b0d3){_0x22d747=_0x22d747-0x6b;var _0x2e1f15=_0x35ddb5[_0x22d747];return _0x2e1f15;},_0x22d7(_0x335b68,_0x5b97f5);}function _0x35dd(){var _0x30a586=['focus\x20blur','DOM','<button>','tabIndex','8pt\x209pt\x2010pt\x2011pt\x2012pt\x2014pt\x2018pt\x2024pt\x2036pt','children','nextSibling','slice','text','setContent','extend','color\x20font-size\x20font-family','<br>','dark','resize','html','getBody','comm_path','post','file_dropped','\x20|\x20bullist\x20numlist\x20outdent\x20indent\x20ltr\x20rtl\x20blockquote','setCursorLocation','first','file_picker_type','plain2html','dragover\x20dragleave','spellchecker','upload_file','close','length','drop','action','settings','compose','getNode','_rc_sig','which','gui_objects','each',':next','setRequestHeader','init','mode','$extra\x20','triggerEvent','url','multipart/form-data','<span\x20class=\x22img\x22>','<div\x20class=\x22upload-form\x22>','quote_html','prepend','spellcheck_resume','_file[]','substring','setCurrentLanguage','BODY','17ryHjLu','prepare','&_file=','append','height','<li>','find','file_picker_entry','get_label','get','38145870nIbDzf','compose_focus_elem','offset','appendChild','4848969aoTMgV','<p>','image','format','hidden','mceSpellCheck','keydown','editor-load','init_callback','indexOf','droptarget','6109710QJVyEa','spellcheckstart','font[face|size|color|style],span[id|class|align|style]','update','button,a.button','mimetype','no_error_found','get_language','spell_lang','childNodes','save','spellcheck_observer','target','focus','<span\x20class=\x22name\x22>','getContentAreaContainer','<div\x20class=\x22hint\x22>','object','identity','<img>','#image-selector','value','firstChild','html2plain','plugins','&_action=display-attachment','setup','start','mceAddEditor','<div\x20id=\x22_rc_sig\x22>','set_caret_pos','force_focus','join','parents','.btn','_token','autolink\x20charmap\x20code\x20hr\x20image\x20link\x20paste\x20tabfocus','file_picker_callback','refresh','$extra','rcmail.upload_input(\x27imageuploadform\x27)','fileuploaded','tabfocus_elements','toolbar','&_from=','_from','disabled_buttons','</div>','SpellcheckStart\x20SpellcheckEnd','getContent','selection','FormData','program/resources/tinymce/video.png','dom','lang','innerHTML','file_upload_form','file_dialog_event+','remove','file_picker_close','get_content','setup_callback','select','name','get_modifier','panel','sliding','button','util','7uNIBVs','XHR','compose_type_activity','&_thumbnail=1','filedrop','focused','stopPropagation','attachments','_conf','href','restart','preventDefault','data','clone','assets_path','attr','replace','.upload-form','execCommand','<div\x20id=\x22_rc_sig\x22></div>','file_dialog_event_','top_posting','lastIndexOf','setHTML','parent','click','nodeName','nosig','insertBefore','--\x20\x0a','rcmail_editor_settings','add','signatures','windowManager','\x20|\x20link\x20unlink\x20table\x20|\x20$extra\x20charmap\x20image\x20media\x20|\x20code\x20searchreplace\x20undo\x20redo','change_identity','99734OvJveb','uploadform','tabindex','get_input_selection','spellcheck_active','task','open','+body[style],+blockquote[style],+div[style]','compose_mode','type','state','env','prev','contenteditable','getContainer','next','fake-editor-id','scroll','ready','test','removeClass','spellCheck','_initial_conf','closest','mceRemoveEditor','editor-init','<input>','toggle','set_busy','/?_task=utils&_action=spell_html&_remote=1','vendver','extra_buttons','8452wSWmsK','getWin','addClass','old_file_drop','content_css','xhr','push','last','editor','<div\x20id=\x22image-selector\x22\x20class=\x22image-selector\x20file-upload\x22><ul\x20id=\x22image-selector-list\x22\x20class=\x22attachmentslist\x22></ul></div>','markErrors',']:not(iframe)','spelling_state_observer','<form\x20id=\x22imageuploadform\x22>','val','complete','820ffRczi','733356AciPGb','13080320sgmnqb','*[tabindex=','beforeSend','compose_id','_blank','registered_request_token','attachment','file','prop','input','opacity:0;height:1px;width:1px','btn\x20btn-secondary\x20attach','div.tox-toolbar__group','identities_initialized','spellcheck_stop','request_token','.tox-dialog','\x20|\x20charmap\x20hr\x20link\x20unlink\x20image\x20code\x20$extra','set_content'];_0x35dd=function(){return _0x30a586;};return _0x35dd();}