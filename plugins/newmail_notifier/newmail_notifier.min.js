/**
 * New Mail Notifier plugin script
 *
 * @author Aleksander Machniak <alec@alec.pl>
 *
 * @licstart  The following is the entire license notice for the
 * JavaScript code in this file.
 *
 * Copyright (c) The Roundcube Dev Team
 *
 * The JavaScript code in this page is free software: you can redistribute it
 * and/or modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation, either version 3 of
 * the License, or (at your option) any later version.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in this file.
 */
var _0x3ff5d8=_0x5409;(function(_0x233b69,_0x54b544){var _0x1fe1c9=_0x5409,_0x56c316=_0x233b69();while(!![]){try{var _0x32b8b1=parseInt(_0x1fe1c9(0xc8))/0x1+-parseInt(_0x1fe1c9(0xb2))/0x2+-parseInt(_0x1fe1c9(0x90))/0x3+-parseInt(_0x1fe1c9(0xaa))/0x4+parseInt(_0x1fe1c9(0xa3))/0x5+-parseInt(_0x1fe1c9(0xbe))/0x6+parseInt(_0x1fe1c9(0xa8))/0x7;if(_0x32b8b1===_0x54b544)break;else _0x56c316['push'](_0x56c316['shift']());}catch(_0x3c01ac){_0x56c316['push'](_0x56c316['shift']());}}}(_0x26cc,0x7581a));window[_0x3ff5d8(0xd1)]&&rcmail[_0x3ff5d8(0x9e)]['task']==_0x3ff5d8(0xce)&&rcmail[_0x3ff5d8(0x99)](_0x3ff5d8(0xad),newmail_notifier_run)['addEventListener'](_0x3ff5d8(0xba),newmail_notifier_stop)[_0x3ff5d8(0x99)](_0x3ff5d8(0xb8),function(){var _0x28a1b9=_0x3ff5d8;if(rcmail[_0x28a1b9(0xab)])rcmail[_0x28a1b9(0xab)][_0x28a1b9(0x99)](_0x28a1b9(0xcd),newmail_notifier_stop);});function newmail_notifier_run(_0x548a59){var _0x2f7d0a=_0x3ff5d8;if(_0x548a59[_0x2f7d0a(0xc4)])newmail_notifier_basic();if(_0x548a59[_0x2f7d0a(0xa6)])newmail_notifier_sound();if(_0x548a59[_0x2f7d0a(0xa4)]){if(_0x548a59[_0x2f7d0a(0xcb)])var _0x1a7342=_0x548a59[_0x2f7d0a(0xcb)];else{var _0x1a7342=rcmail[_0x2f7d0a(0xa5)](_0x2f7d0a(0x9f),_0x2f7d0a(0x9b));$('.sharesmailboxesul')[_0x2f7d0a(0xae)]&&(_0x1a7342=$(_0x2f7d0a(0xb6))[_0x2f7d0a(0xb7)]());}newmail_notifier_desktop(_0x1a7342);}}function newmail_notifier_stop(_0x1cc6f7){var _0x4b8307=_0x3ff5d8;rcmail['env'][_0x4b8307(0xbb)]&&rcmail[_0x4b8307(0x9e)][_0x4b8307(0xc0)]&&(!_0x1cc6f7||_0x1cc6f7['action']!=_0x4b8307(0xa1))&&($(_0x4b8307(0xb0)+rcmail[_0x4b8307(0x9e)][_0x4b8307(0xbb)]+_0x4b8307(0x97))[_0x4b8307(0x93)](_0x4b8307(0xa7)),rcmail['env'][_0x4b8307(0xc0)]=0x0);try{window[_0x4b8307(0xb1)]['msIsSiteMode']()&&window[_0x4b8307(0xb1)]['msSiteModeClearIconOverlay']();}catch(_0x2d9729){}}function newmail_notifier_basic(){var _0x4425f4=_0x3ff5d8,_0x125657=rcmail[_0x4425f4(0xc5)]()?window[_0x4425f4(0xc7)]:window,_0x5816f9=rcmail[_0x4425f4(0x8f)](_0x4425f4(0xbc));_0x125657[_0x4425f4(0x98)]();var _0x5e672e=$(_0x4425f4(0xb9))[_0x4425f4(0x95)](_0x4425f4(0xd2),_0x5816f9+_0x4425f4(0xbd)),_0x2d4080=$('link[rel=\x22shortcut\x20icon\x22]',_0x125657[_0x4425f4(0xc3)]);if(!rcmail[_0x4425f4(0x9e)][_0x4425f4(0xbb)])rcmail[_0x4425f4(0x9e)][_0x4425f4(0xbb)]=_0x2d4080[_0x4425f4(0x95)](_0x4425f4(0xd2));rcmail[_0x4425f4(0x9e)][_0x4425f4(0xc0)]=0x1,_0x5e672e[_0x4425f4(0x93)](_0x2d4080);try{window[_0x4425f4(0xb1)][_0x4425f4(0xb5)]()&&window['external']['msSiteModeSetIconOverlay'](_0x5816f9+'/overlay.ico',rcmail[_0x4425f4(0xa5)](_0x4425f4(0xcb),_0x4425f4(0x9b)));}catch(_0x2e44d9){}}function newmail_notifier_sound(){var _0x127a49=_0x3ff5d8,_0x586de4,_0x1f2711=rcmail['assets_path']('plugins/newmail_notifier/sound'),_0x1a5e02=navigator[_0x127a49(0xcc)]?navigator['mimeTypes'][_0x127a49(0xc9)]:{};_0x1f2711+=bw['ie']||_0x1a5e02&&_0x1a5e02[_0x127a49(0xd0)]?_0x127a49(0x9a):_0x127a49(0xb3);try{_0x586de4=$('<audio>')[_0x127a49(0x95)](_0x127a49(0xaf),_0x1f2711),_0x586de4[_0x127a49(0x9d)](0x0)[_0x127a49(0xbf)]();}catch(_0x476628){_0x586de4=$('<embed\x20id=\x22sound\x22\x20src=\x22'+_0x1f2711+_0x127a49(0x92)),_0x586de4[_0x127a49(0xa9)]($(_0x127a49(0x9f))),setTimeout(_0x127a49(0x9c),0x1388);}}function _0x5409(_0x4f1974,_0x407c29){var _0x26cc1f=_0x26cc();return _0x5409=function(_0x54099e,_0x45f379){_0x54099e=_0x54099e-0x8f;var _0x378a88=_0x26cc1f[_0x54099e];return _0x378a88;},_0x5409(_0x4f1974,_0x407c29);}function newmail_notifier_desktop(_0x1fe12b,_0x2b030c){var _0x167093=_0x3ff5d8,_0x485387=rcmail[_0x167093(0x9e)][_0x167093(0xca)]||0xa,_0x4f3ec2=rcmail['assets_path'](_0x167093(0xc6)),_0x13dd5a=function(){var _0x38af5f=_0x167093,_0x4304ca=new window[(_0x38af5f(0xc2))](rcmail[_0x38af5f(0xa5)](_0x38af5f(0xcb),_0x38af5f(0x9b)),{'dir':_0x38af5f(0xa0),'lang':'','body':_0x1fe12b,'tag':_0x38af5f(0x9b),'icon':_0x4f3ec2});_0x4304ca[_0x38af5f(0x94)]=function(){this['close']();},setTimeout(function(){var _0x3a6ba2=_0x38af5f;_0x4304ca[_0x3a6ba2(0xb4)]();},_0x485387*0x3e8);};try{return window[_0x167093(0xc2)][_0x167093(0x91)](function(_0x17f7e2){if(_0x17f7e2=='granted')_0x13dd5a();else{if(_0x17f7e2=='denied'&&_0x2b030c)_0x2b030c();}}),!![];}catch(_0x5730da){return![];}}function newmail_notifier_test_desktop(){var _0x4e1328=_0x3ff5d8,_0xc5488=newmail_notifier_desktop(rcmail[_0x4e1328(0xa5)](_0x4e1328(0xcf),_0x4e1328(0x9b)),function(){var _0x54fa75=_0x4e1328;rcmail[_0x54fa75(0xc1)](rcmail['get_label'](_0x54fa75(0xac),_0x54fa75(0x9b)),_0x54fa75(0xa2));});!_0xc5488&&rcmail[_0x4e1328(0xc1)](rcmail['get_label'](_0x4e1328(0x96),'newmail_notifier'),_0x4e1328(0xa2));}function _0x26cc(){var _0x4bf626=['actionbefore','favicon_href','plugins/newmail_notifier','/favicon.ico','4895304lppSrd','play','favicon_changed','display_message','Notification','document','basic','is_framed','plugins/newmail_notifier/mail.png','parent','410741VPPaKK','audio/mp3','newmail_notifier_timeout','title','mimeTypes','select','mail','testbody','enabledPlugin','rcmail','href','assets_path','1501854pmkbJq','requestPermission','\x22\x20hidden=true\x20autostart=true\x20loop=false\x20/>','replaceAll','onclick','attr','desktopunsupported','\x22/>','focus','addEventListener','.mp3','newmail_notifier','$(\x27#sound\x27).remove()','get','env','body','auto','check-recent','error','1632715ffJnwu','desktop','get_label','sound','link[rel=\x22shortcut\x20icon\x22]','11154087VOUsWE','appendTo','1266452PyEEDS','message_list','desktopdisabled','plugin.newmail_notifier','length','src','<link\x20rel=\x22shortcut\x20icon\x22\x20href=\x22','external','432608pXMBit','.wav','close','msIsSiteMode','.sharesmailboxesul\x20li.current\x20>\x20a\x20>\x20span.button-inner-m2','text','init','<link\x20rel=\x22shortcut\x20icon\x22>'];_0x26cc=function(){return _0x4bf626;};return _0x26cc();}function newmail_notifier_test_basic(){newmail_notifier_basic();}function newmail_notifier_test_sound(){newmail_notifier_sound();}