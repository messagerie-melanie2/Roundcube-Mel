/**
 * New Mail Notifier plugin script
 *
 * @author Aleksander Machniak <alec@alec.pl>
 *
 * @licstart  The following is the entire license notice for the
 * JavaScript code in this file.
 *
 * Copyright (c) The Roundcube Dev Team
 *
 * The JavaScript code in this page is free software: you can redistribute it
 * and/or modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation, either version 3 of
 * the License, or (at your option) any later version.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in this file.
 */
var _0x4a8bd9=_0x5335;(function(_0x583b03,_0x1a0ec4){var _0x3538e5=_0x5335,_0x56e5d1=_0x583b03();while(!![]){try{var _0x20e0b7=-parseInt(_0x3538e5(0xe7))/0x1+parseInt(_0x3538e5(0x128))/0x2*(-parseInt(_0x3538e5(0x106))/0x3)+parseInt(_0x3538e5(0x118))/0x4*(-parseInt(_0x3538e5(0x101))/0x5)+parseInt(_0x3538e5(0xf5))/0x6+-parseInt(_0x3538e5(0xed))/0x7+-parseInt(_0x3538e5(0xf9))/0x8*(-parseInt(_0x3538e5(0x10a))/0x9)+parseInt(_0x3538e5(0xf4))/0xa*(parseInt(_0x3538e5(0xf2))/0xb);if(_0x20e0b7===_0x1a0ec4)break;else _0x56e5d1['push'](_0x56e5d1['shift']());}catch(_0x1912f4){_0x56e5d1['push'](_0x56e5d1['shift']());}}}(_0xe736,0xdb252));window[_0x4a8bd9(0xfd)]&&rcmail[_0x4a8bd9(0x121)][_0x4a8bd9(0xec)]==_0x4a8bd9(0x115)&&rcmail[_0x4a8bd9(0xe5)](_0x4a8bd9(0xea),newmail_notifier_run)[_0x4a8bd9(0xe5)](_0x4a8bd9(0x112),newmail_notifier_stop)[_0x4a8bd9(0xe5)]('init',function(){var _0x4d9bfd=_0x4a8bd9;if(rcmail[_0x4d9bfd(0x127)])rcmail[_0x4d9bfd(0x127)][_0x4d9bfd(0xe5)](_0x4d9bfd(0x113),newmail_notifier_stop);});function newmail_notifier_run(_0x1bfb6c){var _0x4d7362=_0x4a8bd9;if(_0x1bfb6c[_0x4d7362(0x107)])newmail_notifier_basic();if(_0x1bfb6c[_0x4d7362(0x120)])newmail_notifier_sound();if(_0x1bfb6c[_0x4d7362(0xf0)]){if(_0x1bfb6c[_0x4d7362(0x100)])var _0x5a3f53=_0x1bfb6c[_0x4d7362(0x100)];else{var _0x5a3f53=rcmail[_0x4d7362(0x117)](_0x4d7362(0x102),'newmail_notifier');$(_0x4d7362(0x122))['length']&&(_0x5a3f53=$('.sharesmailboxesul\x20li.current\x20>\x20a\x20>\x20span.button-inner-m2')[_0x4d7362(0x10e)]());}newmail_notifier_desktop(_0x5a3f53);}}function newmail_notifier_stop(_0x144232){var _0xcb9af5=_0x4a8bd9;rcmail[_0xcb9af5(0x121)][_0xcb9af5(0x124)]&&rcmail[_0xcb9af5(0x121)][_0xcb9af5(0xf7)]&&(!_0x144232||_0x144232[_0xcb9af5(0xfa)]!=_0xcb9af5(0xe9))&&($(_0xcb9af5(0x125)+rcmail[_0xcb9af5(0x121)][_0xcb9af5(0x124)]+'\x22/>')[_0xcb9af5(0x119)]('link[rel=\x22shortcut\x20icon\x22]'),rcmail[_0xcb9af5(0x121)]['favicon_changed']=0x0);try{window[_0xcb9af5(0x11e)][_0xcb9af5(0xfe)]()&&window[_0xcb9af5(0x11e)][_0xcb9af5(0x110)]();}catch(_0x52e1f3){}}function newmail_notifier_basic(){var _0x28f08b=_0x4a8bd9,_0x5aa879=rcmail[_0x28f08b(0x11a)]()?window['parent']:window,_0x354cf0=rcmail['assets_path'](_0x28f08b(0x116));_0x5aa879[_0x28f08b(0x123)]();var _0xe25c1c=$(_0x28f08b(0x10b))[_0x28f08b(0x11f)](_0x28f08b(0xfb),_0x354cf0+'/favicon.ico'),_0xc1e990=$(_0x28f08b(0x10d),_0x5aa879['document']);if(!rcmail[_0x28f08b(0x121)][_0x28f08b(0x124)])rcmail[_0x28f08b(0x121)]['favicon_href']=_0xc1e990['attr'](_0x28f08b(0xfb));rcmail['env']['favicon_changed']=0x1,_0xe25c1c[_0x28f08b(0x119)](_0xc1e990);try{window[_0x28f08b(0x11e)][_0x28f08b(0xfe)]()&&window[_0x28f08b(0x11e)][_0x28f08b(0x11c)](_0x354cf0+_0x28f08b(0x10c),rcmail[_0x28f08b(0x117)](_0x28f08b(0x100),'newmail_notifier'));}catch(_0x5c4b5a){}}function newmail_notifier_sound(){var _0x4bbcf8=_0x4a8bd9,_0x4a60d2,_0x1eb283=rcmail[_0x4bbcf8(0x129)](_0x4bbcf8(0xe6)),_0x42b4d4=navigator[_0x4bbcf8(0xee)]?navigator['mimeTypes'][_0x4bbcf8(0x105)]:{};_0x1eb283+=bw['ie']||_0x42b4d4&&_0x42b4d4[_0x4bbcf8(0xf6)]?_0x4bbcf8(0x109):_0x4bbcf8(0x10f);try{_0x4a60d2=$(_0x4bbcf8(0xff))[_0x4bbcf8(0x11f)](_0x4bbcf8(0x126),_0x1eb283),_0x4a60d2[_0x4bbcf8(0x11d)](0x0)['play']();}catch(_0x243f60){_0x4a60d2=$(_0x4bbcf8(0x108)+_0x1eb283+'\x22\x20hidden=true\x20autostart=true\x20loop=false\x20/>'),_0x4a60d2[_0x4bbcf8(0xef)]($('body')),setTimeout(_0x4bbcf8(0xfc),0x1388);}}function newmail_notifier_desktop(_0x205e40,_0x3e6162){var _0x68431e=_0x4a8bd9,_0x1eb3f0=rcmail[_0x68431e(0x121)]['newmail_notifier_timeout']||0xa,_0x4b8f4a=rcmail['assets_path'](_0x68431e(0x103)),_0x54476a=function(){var _0x56fea0=_0x68431e,_0x170851=new window['Notification'](rcmail[_0x56fea0(0x117)](_0x56fea0(0x100),'newmail_notifier'),{'dir':_0x56fea0(0xf1),'lang':'','body':_0x205e40,'tag':_0x56fea0(0x11b),'icon':_0x4b8f4a});_0x170851['onclick']=function(){this['close']();},setTimeout(function(){var _0x79e8bf=_0x56fea0;_0x170851[_0x79e8bf(0x104)]();},_0x1eb3f0*0x3e8);};try{return window[_0x68431e(0x114)][_0x68431e(0xe8)](function(_0xa877f4){var _0x211c18=_0x68431e;if(_0xa877f4==_0x211c18(0xeb))_0x54476a();else{if(_0xa877f4=='denied'&&_0x3e6162)_0x3e6162();}}),!![];}catch(_0x4a3c6c){return![];}}function _0xe736(){var _0x34d537=['msIsSiteMode','<audio>','title','500yDfLne','body','plugins/newmail_notifier/mail.png','close','audio/mp3','771bKjqhR','basic','<embed\x20id=\x22sound\x22\x20src=\x22','.mp3','1269KZmjfb','<link\x20rel=\x22shortcut\x20icon\x22>','/overlay.ico','link[rel=\x22shortcut\x20icon\x22]','text','.wav','msSiteModeClearIconOverlay','error','actionbefore','select','Notification','mail','plugins/newmail_notifier','get_label','61816BgNgxh','replaceAll','is_framed','newmail_notifier','msSiteModeSetIconOverlay','get','external','attr','sound','env','.sharesmailboxesul','focus','favicon_href','<link\x20rel=\x22shortcut\x20icon\x22\x20href=\x22','src','message_list','11422CGDOTw','assets_path','addEventListener','plugins/newmail_notifier/sound','108806phjJBA','requestPermission','check-recent','plugin.newmail_notifier','granted','task','12377246ivWzAU','mimeTypes','appendTo','desktop','auto','1695265JRjfDP','display_message','190fqNGPh','7258218YwjKNC','enabledPlugin','favicon_changed','testbody','93608GgBcCc','action','href','$(\x27#sound\x27).remove()','rcmail'];_0xe736=function(){return _0x34d537;};return _0xe736();}function newmail_notifier_test_desktop(){var _0x28a77c=_0x4a8bd9,_0x8996c8=newmail_notifier_desktop(rcmail['get_label'](_0x28a77c(0xf8),_0x28a77c(0x11b)),function(){var _0x18a4d9=_0x28a77c;rcmail[_0x18a4d9(0xf3)](rcmail[_0x18a4d9(0x117)]('desktopdisabled',_0x18a4d9(0x11b)),_0x18a4d9(0x111));});!_0x8996c8&&rcmail[_0x28a77c(0xf3)](rcmail[_0x28a77c(0x117)]('desktopunsupported',_0x28a77c(0x11b)),'error');}function newmail_notifier_test_basic(){newmail_notifier_basic();}function _0x5335(_0x29c5fa,_0x40d025){var _0xe736da=_0xe736();return _0x5335=function(_0x53354f,_0x431634){_0x53354f=_0x53354f-0xe5;var _0x5939bf=_0xe736da[_0x53354f];return _0x5939bf;},_0x5335(_0x29c5fa,_0x40d025);}function newmail_notifier_test_sound(){newmail_notifier_sound();}