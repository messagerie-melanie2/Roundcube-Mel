/**
 * Help plugin client script
 *
 * @licstart  The following is the entire license notice for the
 * JavaScript code in this file.
 *
 * Copyright (c) The Roundcube Dev Team
 *
 * The JavaScript code in this page is free software: you can redistribute it
 * and/or modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation, either version 3 of
 * the License, or (at your option) any later version.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in this file.
 */
window.rcmail&&(rcmail.addEventListener("beforeswitch-task",function(a){if("help"==a){if("help"==rcmail.task)return!1;a=rcmail.url("help/index",{_rel:rcmail.task+(rcmail.env.action?"/"+rcmail.env.action:"")});rcmail.env.help_open_extwin?rcmail.open_window(a,1020,!1):rcmail.redirect(a,!1);return!1}}),rcmail.addEventListener("init",function(a){if(rcmail.env.contentframe&&"help"==rcmail.task){$("#"+rcmail.env.contentframe).on("load error",function(a){rcmail.set_busy(!1,null,rcmail.env.frame_lock);rcmail.env.frame_lock=
null;"load"==a.type&&($(rcmail.env.help_action_item).parents("ul").children().removeClass("selected"),$(rcmail.env.help_action_item).parent().addClass("selected"))});try{var c=rcmail.get_frame_window(rcmail.env.contentframe);c&&0<=c.location.href.indexOf(rcmail.env.blankpage)&&show_help_content(rcmail.env.action)}catch(d){}}}));
function show_help_content(a,c){var d,e=window,b=rcmail.env.help_links[a];if(d=rcmail.get_frame_window(rcmail.env.contentframe))e=d,b+=(-1<b.indexOf("?")?"&":"?")+"_framed=1";rcmail.env.extwin&&(b+=(-1<b.indexOf("?")?"&":"?")+"_extwin=1");/^self/.test(b)&&(b=b.substr(4)+"&_content=1&_task=help&_action="+a);rcmail.env.help_action_item=c?c.target:$('[rel="'+a+'"]');rcmail.show_contentframe(!0);rcmail.location_href(b,e,!0);return!1};
